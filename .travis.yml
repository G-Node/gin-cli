language: go

dist: trusty
sudo: required

services:
    - docker

git:
    submodules: false

go:
  - 1.9
  - tip

matrix:
    allow_failures:
        - go: tip

before_install:
  - sudo apt-get update
  - sudo apt-get install git-annex
  - sudo apt-get install python3
  - git clone https://github.com/G-Node/gin-cli-test
  - python3 --version

install:
  # tools
  - go get github.com/golang/lint/golint
  - go get github.com/GeertJohan/fgt
  # coveralls
  - go get github.com/mattn/goveralls
  - go get golang.org/x/tools/cmd/cover
  # dependencies
  - go get github.com/docopt/docopt-go
  - go get github.com/spf13/viper
  - go get github.com/howeyc/gopass
  - go get golang.org/x/crypto/ssh
  - go get github.com/G-Node/gin-core/gin
  - go get github.com/G-Node/gin-repo/wire
  - go get golang.org/x/crypto/ssh
  - go get github.com/gogits/go-gogs-client
  - go get github.com/fatih/color
  - go get github.com/hashicorp/go-version
  - go get github.com/shibukawa/configdir
  # import path symlink for forks
  - if [ ! -d ${GOPATH}/src/github.com/G-Node/gin-cli ]; then ln -vs $(pwd) ${GOPATH}/src/github.com/G-Node/gin-cli; fi

script:
  - make install

